<br>

<% if controller_name == "reports" %>

  <% unless (Case.where(report_id: @report).order(:timeframe).first(@case_num).sum { |hash| hash[:point]} + 0.9).floor == (Case.where(report_id: @report).order(:timeframe).first(@case_num+1).sum { |hash| hash[:point]} + 0.9).floor %>
    <p style="text-align: center;">-  <%= (Case.where(report_id: @report).order(:timeframe).first(@case_num+1).sum { |hash| hash[:point]} + 0.9).floor %> 件目  -</p>
  <% end %>



  <div class="field cf">
    <%= f.label :timeframe, '獲得時間', style: "float: left;" %>
      <%= f.select :timeframe, Case.timeframes.keys, {class: "", prompt:"時間帯を選択"} %>
  </div>

  <div class="field">
    <%= f.label :staff_id, '名前' %>
    <%#= f.collection_select :staff_id, @staffs, :id, :name, { prompt: '選択してください' }, { class: 'form-control' } %>
    <%= f.select :staff_id, Staff.all.map { |staff| [staff.name, staff.id] }, prompt:"獲得者を選択" %>
  </div>

  <div class="field">
    <%= f.label :point, '点数' %>
    <%= f.number_field :point, value: 1.0, max: 1.0, min: 0, step: "0.1", class:"form-control", style:"width:60px" %>
  </div>

  <br>
  <div>
    <%#= link_to_remove_association "実績の削除", f, class:"btn btn-danger", style:"margin-top:15px;" %>
    <%#= link_to_remove_association "実績の削除", f %>

    <%#= link_to '削除', case_path(f), method: :delete, class: "" %>

    <% if Case.where(report_id: @case).nil? %>
    <% binding.pry %>
      <%= link_to '削除', case_path(Case.where(report_id: @case)[@case_num].id), method: :delete, data: { confirm: "削除します。よろしいですか？" }, class: "" %>
    <% end %>
    <% @case_num += 1 %>
  </div>
<% end %>





<% if controller_name == "cases" %>
  <div class="field cf">
    <%= f.label :timeframe, '獲得時間', style: "float: left;" %>
      <%= f.select :timeframe, Case.timeframes.keys, {class: "", prompt:"時間帯を選択"} %>
  </div>

  <div class="field">
    <%= f.label :staff_id, '名前' %>
    <%#= f.collection_select :staff_id, @staffs, :id, :name, { prompt: '選択してください' }, { class: 'form-control' } %>
    <%= f.select :staff_id, Staff.all.map { |staff| [staff.name, staff.id] }, prompt:"獲得者を選択" %>
  </div>

  <div class="field">
    <%= f.label :point, '点数' %>
    <%= f.number_field :point, value: 1.0, max: 1.0, min: 0, step: "0.1", class:"form-control", style:"width:60px" %>
  </div>
  <br>
<% end %>